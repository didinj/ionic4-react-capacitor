import{G as R,i as O,c as V}from"./index-H-F5oTc4.js";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Y=(t,r,c,o)=>{const s=F(t)?{capture:!1,passive:!!o.passive}:!1;let n,a;return t.__zone_symbol__addEventListener?(n="__zone_symbol__addEventListener",a="__zone_symbol__removeEventListener"):(n="addEventListener",a="removeEventListener"),t[n](r,c,s),()=>{t[a](r,c,s)}},F=t=>{if(M===void 0)try{const r=Object.defineProperty({},"passive",{get:()=>{M=!0}});t.addEventListener("optsTest",()=>{},r)}catch(r){M=!1}return!!M};let M;const j=2e3,q=(t,r,c,o,s)=>{let n,a,v,l,f,u,p,g=0;const i=d=>{g=Date.now()+j,r(d)&&(!a&&c&&(a=Y(t,"touchmove",c,s)),v||(v=Y(d.target,"touchend",e,s)),l||(l=Y(d.target,"touchcancel",e,s)))},X=d=>{g>Date.now()||r(d)&&(!u&&c&&(u=Y(G(t),"mousemove",c,s)),p||(p=Y(G(t),"mouseup",y,s)))},e=d=>{h(),o&&o(d)},y=d=>{T(),o&&o(d)},h=()=>{a&&a(),v&&v(),l&&l(),a=v=l=void 0},T=()=>{u&&u(),p&&p(),u=p=void 0},S=()=>{h(),T()},_=(d=!0)=>{d?(n||(n=Y(t,"touchstart",i,s)),f||(f=Y(t,"mousedown",X,s))):(n&&n(),f&&f(),n=f=void 0,S())};return{enable:_,stop:S,destroy:()=>{_(!1),o=c=r=void 0}}},G=t=>t instanceof Document?t:t.ownerDocument,H=(t,r,c)=>{const o=c*(Math.PI/180),s=t==="x",n=Math.cos(o),a=r*r;let v=0,l=0,f=!1,u=0;return{start(p,g){v=p,l=g,u=0,f=!0},detect(p,g){if(!f)return!1;const i=p-v,X=g-l,e=i*i+X*X;if(e<a)return!1;const y=Math.sqrt(e),h=(s?i:X)/y;return h>n?u=1:h<-n?u=-1:u=0,f=!1,!0},isGesture(){return u!==0},getDirection(){return u}}},I=t=>{let r=!1,c=!1,o=!0,s=!1;const n=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},t),a=n.canStart,v=n.onWillStart,l=n.onStart,f=n.onEnd,u=n.notCaptured,p=n.onMove,g=n.threshold,i=n.passive,X=n.blurOnStart,e={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},y=H(n.direction,n.threshold,n.maxAngle),h=R.createGesture({name:t.gestureName,priority:t.gesturePriority,disableScroll:t.disableScroll}),T=m=>{const w=A(m);return c||!o||(x(m,e),e.startX=e.currentX,e.startY=e.currentY,e.startTime=e.currentTime=w,e.velocityX=e.velocityY=e.deltaX=e.deltaY=0,e.event=m,a&&a(e)===!1)||(h.release(),!h.start())?!1:(c=!0,g===0?E():(y.start(e.startX,e.startY),!0))},S=m=>{if(r){!s&&o&&(s=!0,C(e,m),requestAnimationFrame(_));return}C(e,m),y.detect(e.currentX,e.currentY)&&(!y.isGesture()||!E())&&W()},_=()=>{r&&(s=!1,p&&p(e))},E=()=>h.capture()?(r=!0,o=!1,e.startX=e.currentX,e.startY=e.currentY,e.startTime=e.currentTime,v?v(e).then(b):b(),!0):!1,d=()=>{if(typeof document<"u"){const m=document.activeElement;m!=null&&m.blur&&m.blur()}},b=()=>{X&&d(),l&&l(e),o=!0},D=()=>{r=!1,c=!1,s=!1,o=!0,h.release()},L=m=>{const w=r,z=o;if(D(),!!z){if(C(e,m),w){f&&f(e);return}u&&u(e)}},P=q(n.el,T,S,L,{passive:i}),W=()=>{D(),P.stop(),u&&u(e)};return{enable(m=!0){m||(r&&L(void 0),D()),P.enable(m)},destroy(){h.destroy(),P.destroy()}}},C=(t,r)=>{if(!r)return;const c=t.currentX,o=t.currentY,s=t.currentTime;x(r,t);const n=t.currentX,a=t.currentY,l=(t.currentTime=A(r))-s;if(l>0&&l<100){const f=(n-c)/l,u=(a-o)/l;t.velocityX=f*.7+t.velocityX*.3,t.velocityY=u*.7+t.velocityY*.3}t.deltaX=n-t.startX,t.deltaY=a-t.startY,t.event=r},x=(t,r)=>{let c=0,o=0;if(t){const s=t.changedTouches;if(s&&s.length>0){const n=s[0];c=n.clientX,o=n.clientY}else t.pageX!==void 0&&(c=t.pageX,o=t.pageY)}r.currentX=c,r.currentY=o},A=t=>t.timeStamp||Date.now();/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const k=(t,r,c,o,s)=>{const n=t.ownerDocument.defaultView;let a=O(t);const v=i=>{const{startX:e}=i;return a?e>=n.innerWidth-50:e<=50},l=i=>a?-i.deltaX:i.deltaX,f=i=>a?-i.velocityX:i.velocityX;return I({el:t,gestureName:"goback-swipe",gesturePriority:101,threshold:10,canStart:i=>(a=O(t),v(i)&&r()),onStart:c,onMove:i=>{const e=l(i)/n.innerWidth;o(e)},onEnd:i=>{const X=l(i),e=n.innerWidth,y=X/e,h=f(i),T=e/2,S=h>=0&&(h>.2||X>T),E=(S?1-y:y)*e;let d=0;if(E>5){const b=E/Math.abs(h);d=Math.min(b,540)}s(S,y<=0?.01:V(0,y,.9999),d)}})};export{k as createSwipeBackGesture};
